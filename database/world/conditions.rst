.. _db-world-conditions:

==================
"conditions" table
==================

The ``conditions`` table holds restrictions which can be applied to game
data. This e.g. includes quests, loot, dialogues, or even scripts.

Table structure
---------------

+--------------------+-------------------------+--------+-------+-----------+-------------------+
| Field              | Type                    | Null   | Key   | Default   | Extra             |
+====================+=========================+========+=======+===========+===================+
| condition\_entry   | mediumint(8) unsigned   | NO     | PRI   | NULL      | auto\_increment   |
+--------------------+-------------------------+--------+-------+-----------+-------------------+
| type               | tinyint(3)              | NO     | MUL   | 0         |                   |
+--------------------+-------------------------+--------+-------+-----------+-------------------+
| value1             | mediumint(8) unsigned   | NO     |       | 0         |                   |
+--------------------+-------------------------+--------+-------+-----------+-------------------+
| value2             | mediumint(8) unsigned   | NO     |       | 0         |                   |
+--------------------+-------------------------+--------+-------+-----------+-------------------+

Fields
------

Descriptions for each field with their meaning, usage and relations are
available below.

condition\_entry
----------------

The unique identifier for a condition.

type
----

The ``type`` of condition. The table below lists all types.

+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ID   | Type                                  | Description                                                                                                                                                                                                        |
+======+=======================================+====================================================================================================================================================================================================================+
| -3   | CONDITION\_NOT                        | Used to evaluate if another condition is NOT true.                                                                                                                                                                 |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| -2   | CONDITION\_OR                         | Used to evaluate if *condition* OR *condition* is true.                                                                                                                                                            |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| -1   | CONDITION\_AND                        | Used to evaluate if *condition* AND *condition* is true.                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 0    | CONDITION\_NONE                       | This condition is not used at all.                                                                                                                                                                                 |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 1    | CONDITION\_AURA                       | Checks target currently has the specified aura on him/her.                                                                                                                                                         |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 2    | CONDITION\_ITEM                       | Checks if the player has the required amount (``value2``) of items in his/hers inventory.                                                                                                                          |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 3    | CONDITION\_ITEM\_EQUIPPED             | Checks if the player has the specified item equipped.                                                                                                                                                              |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 4    | CONDITION\_AREAID                     | Checks if the player is within the specified area.                                                                                                                                                                 |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 5    | CONDITION\_REPUTATION\_RANK\_MIN      | Checks if the player has the minimum required reputation rank with a specific faction.                                                                                                                             |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 6    | CONDITION\_TEAM                       | Checks what team the target is a member of.                                                                                                                                                                        |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7    | CONDITION\_SKILL                      | Checks if the player has the required minimum skill value of the specified skill.                                                                                                                                  |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 8    | CONDITION\_QUESTREWARDED              | Checks if the player has been rewarded for the specified quest.                                                                                                                                                    |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 9    | CONDITION\_QUESTTAKEN                 | Checks if the player has taken the quest (as in has it in his/hers quest log.)                                                                                                                                     |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 10   | CONDITION\_AD\_COMMISSION\_AURA       | **TODO**                                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 11   | CONDITION\_NO\_AURA                   | Checks if the target DOES NOT currently have the specified aura on him/her.                                                                                                                                        |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 12   | CONDITION\_ACTIVE\_GAME\_EVENT        | Checks if a game event is currently active.                                                                                                                                                                        |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 13   | CONDITION\_AREA\_FLAG                 | Checks if area\_flag is present in current area (if area\_flag set != 0) AND if not\_have\_flag is not present in current area (if not\_have\_flag != 0)                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 14   | CONDITION\_RACE\_CLASS                | Checks if the target is a certain race AND/OR class.                                                                                                                                                               |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 15   | CONDITION\_LEVEL                      | Checks the targets level.                                                                                                                                                                                          |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 16   | CONDITION\_NOITEM                     | Checks if the player DOES NOT have the required amount (``value2``) of items in his/hers inventory.                                                                                                                |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 17   | CONDITION\_SPELL                      | Checks if the target has or hasn't (``value2``) the specified spell.                                                                                                                                               |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 18   | CONDITION\_INSTANCE\_SCRIPT           | **TODO**                                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 19   | CONDITION\_QUESTAVAILABLE             | Checks if the specified quest is available (can start it) for the player.                                                                                                                                          |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 20   | CONDITION\_RESERVED\_1                | Reserved for later usage                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 21   | CONDITION\_RESERVED\_2                | Reserved for later usage                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 22   | CONDITION\_QUEST\_NONE                | Checks if the player has NOT taken the quest AND has NOT been rewarded for the quest.                                                                                                                              |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 23   | CONDITION\_ITEM\_WITH\_BANK           | Checks if the player has the required amount (``value2``) of items in his/hers inventory OR bank.                                                                                                                  |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 24   | CONDITION\_NOITEM\_WITH\_BANK         | Checks if the player DOES NOT have count (``value2``) of items in his/hers inventory OR bank.                                                                                                                      |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 25   | CONDITION\_NOT\_ACTIVE\_GAME\_EVENT   | Checks if a game event is currently NOT active.                                                                                                                                                                    |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 26   | CONDITION\_ACTIVE\_HOLIDAY            | Checks if a holiday is active                                                                                                                                                                                      |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 27   | CONDITION\_NOT\_ACTIVE\_HOLIDAY       | Checks if a holiday is not active                                                                                                                                                                                  |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 28   | CONDITION\_LEARNABLE\_ABILITY         | Checks if the player can learn ability (using minimum skill value from :doc:`../../file-formats/dbc/skilllineability`.) If the player has spell or has item (when defined) the condition will evaluate to false.   |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 29   | CONDITION\_SKILL\_BELOW               | **TODO**                                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 30   | CONDITION\_REPUTATION\_RANK\_MAX      | Checks if the player has a higher reputation rank than specified a faction.                                                                                                                                        |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 31   | CONDITION\_RESERVED\_3                | Reserved for later usage                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 32   | CONDITION\_SOURCE\_AURA               | Checks if the source of the condition (like looted npc) has an aura.                                                                                                                                               |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 33   | CONDITION\_LAST\_WAYPOINT             | Checks the waypoint-state of the source of the condition.                                                                                                                                                          |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 34   | CONDITION\_RESERVED\_4                | Reserved for later usage                                                                                                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 35   | CONDITION\_GENDER                     | Checks the gender of a player.                                                                                                                                                                                     |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 36   | CONDITION\_DEAD\_OR\_AWAY             | Checks if a player, a player’s group, all players in an instance, or a creature is dead or left the map.                                                                                                           |
+------+---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

value1
------

The value of this field depends on what ``type`` of condition is used.

value2
------

The value of this field depends on what ``type`` of condition is used.

+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Condition type                        | value1                                          | value2                                                                                                                                        |
+=======================================+=================================================+===============================================================================================================================================+
| CONDITION\_NOT                        | Reference to another condition\_entry           | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_OR                         | Reference to another condition\_entry           | Reference to another condition\_entry                                                                                                         |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_AND                        | Reference to another condition\_entry           | Reference to another condition\_entry                                                                                                         |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NONE                       | 0                                               | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_AURA                       | :doc:`../../file-formats/dbc/spell` ID          | Spell effect index to aura effect.                                                                                                            |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_ITEM                       | `Item ID <item_template>`__                     | count (number of items required)                                                                                                              |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_ITEM\_EQUIPPED             | `Item ID <item_template>`__                     | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_AREAID                     | :doc:`../../file-formats/dbc/areatable` ID      | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_REPUTATION\_RANK\_MIN      | :doc:`../../file-formats/dbc/faction` ID        | Reputation rank (defined in SharedDefines.h, enum ReputationRank)                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_TEAM                       | Team ID: 469 for Alliance, 67 for Horde         | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_SKILL                      | :doc:`../../file-formats/dbc/skillline` ID      | Skill value                                                                                                                                   |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_QUESTREWARDED              | `Quest ID <quest_template>`__                   | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_QUESTTAKEN                 | `Quest ID <quest_template>`__                   | 0, 1 or 2 (0 any state, 1 if quest incomplete, 2 if quest completed).                                                                         |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_AD\_COMMISSION\_AURA       | 0                                               | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NO\_AURA                   | :doc:`../../file-formats/dbc/spell` ID          | Spell effect index to aura effect.                                                                                                            |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_ACTIVE\_GAME\_EVENT        | `Game event ID <game_event>`__                  | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_AREA\_FLAG                 | Area flag                                       | Unwanted area flag                                                                                                                            |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_RACE\_CLASS                | :doc:`../../file-formats/dbc/chrraces` mask     | :doc:`../../file-formats/dbc/chrclasses` mask                                                                                                 |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_LEVEL                      | Character level                                 | 0, 1 or 2 (0: equal to, 1: equal or higher than, 2: equal or less than)                                                                       |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NOITEM                     | `Item ID <item_template>`__                     | Count (number of items)                                                                                                                       |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_SPELL                      | :doc:`../../file-formats/dbc/spell` ID          | 0 or 1 (0: has spell, 1: hasn't spell)                                                                                                        |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_INSTANCE\_SCRIPT           | **TODO**                                        | **TODO**                                                                                                                                      |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_QUESTAVAILABLE             | `Quest ID <quest_template>`__                   | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_RESERVED\_1                | Reserved for later usage                        | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_RESERVED\_2                | Reserved for later usage                        | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_QUEST\_NONE                | `Quest ID <quest_template>`__                   | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_ITEM\_WITH\_BANK           | `Item ID <item_template>`__                     | Count (number of items required)                                                                                                              |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NOITEM\_WITH\_BANK         | `Item ID <item_template>`__                     | Count (number of items required)                                                                                                              |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NOT\_ACTIVE\_GAME\_EVENT   | `Game event ID <game_event>`__                  | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_ACTIVE\_HOLIDAY            | Holiday ID                                      | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_NOT\_ACTIVE\_HOLIDAY       | Holiday ID                                      | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_LEARNABLE\_ABILITY         | :doc:`../../file-formats/dbc/spell` ID          | 0 or `Item ID <item_template>`__ (item entry can be used if you want to check if the player has one (1) item in his/hers inventory or bank)   |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_SKILL\_BELOW               | :doc:`../../file-formats/dbc/skillline` ID      | Skill value                                                                                                                                   |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_REPUTATION\_RANK\_MAX      | :doc:`../../file-formats/dbc/faction` ID        | Reputation rank (defined in SharedDefines.h, enum ReputationRank)                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_RESERVED\_3                | Reserved for later usage                        | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_SOURCE\_AURA               | :doc:`../../file-formats/dbc/spell` ID          | Spell effect index to aura effect                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_LAST\_WAYPOINT             | Waypoint ID                                     | 0: exact, 1: wp <= waypointId, 2: wp > waypointId                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_RESERVED\_4                | Reserved for later usage                        | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_GENDER                     | 0: male, 1: female, 2: none                     | 0                                                                                                                                             |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| CONDITION\_DEAD\_OR\_AWAY             | 0: player, 1: group, 2: instance, 3: creature   | 0 or range                                                                                                                                    |
+---------------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+

